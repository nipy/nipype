<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Neuroimaging in Python - Pipelines and Interfaces &mdash; nipy pipeline and interfaces package</title>
    
    <link rel="stylesheet" href="../_static/nipype.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.11.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="top" title="nipy pipeline and interfaces package" href="../index.html" />
 
<meta name="keywords" content="nipype, neuroimaging, pipeline, workflow, parallel, python, neuroscience">
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-339450-7', 'nipy.org/nipype');
  ga('send', 'pageview');
</script>

  </head>
  <body role="document">
<div class="header-wrapper">
    <div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
            <a href="../index.html">
            <img src="../_static/nipype-banner-bg.png" alt="NIPY logo"  border="0" />
        <div style="margin-top: 1em;
                border-top: 1px solid #AAA;
                border-bottom: 1px solid #AAA;
                border-radius: 5px;
                padding: 3px 1em;">
            <link rel="stylesheet" href="http://www.google.com/cse/style/look/default.css" type="text/css" />
<style type="text/css">
    a.navbar {
    color: ;
    letter-spacing: .05em;
    font-weight: bold;
        }
</style>

<a class="navbar" href="../index.html">Home</a> ·
<a class="navbar" href="../quickstart.html">Quickstart</a> ·
<a class="navbar" href="../documentation.html">Documentation</a> ·
<a class="navbar" href="../about.html">Citation</a> ·
<a class="navbar" href="http://nipy.org">NiPy</a>

        </div>
    </div>
</div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<style type="text/css">
    input.gsc-input {
        border-color: #BCCDF0;
    }
    input.gsc-search-button {
        border-color: #666666;
        background-color: #CECECE;
        padding: 0;
    }
    div.sphinxsidebar .tile {
        border: 1px solid #D1DDE2;
        border-radius: 10px;
        background-color: #E1E8EC;
        padding-left: 0.5em;
        margin: 1em 0;
    }
    div.sphinxsidebar input[type="text"] {
        width: 100%;
    }
    div.sphinxsidebar input[type="submit"] {
        width: 100%;
    }
</style>

<div class="sidebarblock">
    <div id="cse-search-form">Loading</div>

    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript">
        google.load('search', '1', {language : 'en'});
        google.setOnLoadCallback(function() {
            var customSearchControl = new google.search.CustomSearchControl(
                    '010960497803984932957:u8pmqf7fdoq');

            customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
            var options = new google.search.DrawOptions();
            options.enableSearchboxOnly("../searchresults.html");
            customSearchControl.draw('cse-search-form', options);
        }, true);
    </script>
</div>

  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Configuration File</a><ul>
<li><a class="reference internal" href="#logging">Logging</a></li>
<li><a class="reference internal" href="#execution">Execution</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#enabling-logging-to-file">Enabling logging to file</a></li>
<li><a class="reference internal" href="#debug-configuration">Debug configuration</a></li>
</ul>
</li>
</ul>

<style type="text/css">
    div.sphinxsidebar .tile {
        border: 1px solid #D1DDE2;
        border-radius: 10px;
        background-color: #E1E8EC;
        padding-left: 0.5em;
        margin: 1em 0;
    }
</style>
<div class="sidebarblock">
    <h3>Versions</h3>

    <div class="tile">
        <table style="width: 100%;">
            <tr style="font-weight: bold;">
                <td align="left">Release</td><td align="right">Devel</td>
            </tr>
            <tr>
                <td align="left">0.11.0</td><td align="right">0.11.0</td>
            </tr>
            <tr>
                <td align="left"><a href="install.html">Download</a></td>
                <td align="right"><a href="https://github.com/nipy/nipype">Github</a></td>
            </tr>
        </table>
    </div>

    <div id="buttons">
        <div id="ohloh-use" style="margin-right: 25px; margin-top: -2px; float: left;">
            <script type="text/javascript"
                    src="https://www.openhub.net/p/480871/widgets/project_users_logo.js">
            </script>
        </div><!-- use -->
        <g:plusone size="medium" annotation="none"></g:plusone>
        <div class="clear"></div>
    </div><!-- buttons container -->
</div>


<script type="text/javascript">
    (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
</script>

<h3>Links</h3>

<ul>
    <li>Docs: <a href="http://nipy.org/nipype">Stable</a> · <a href="http://www.mit.edu/~satra/nipype-nightly/">Nightly</a></li>
    <li>Code: <a href="http://github.com/nipy/nipype">Github</a> · <a href="http://github.com/nipy/nipype/issues">Bugs-Requests</a></li>
    <li>Forum: <a href="http://neurostars.org/t/nipype">User</a> · <a href="http://projects.scipy.org/mailman/listinfo/nipy-devel">Developer</a></li>
    <li><a href="http://nipy.org/software/license/index.html"><img src="https://img.shields.io/pypi/l/nipype.svg" alt="License"></a> · <a href="http://nipy.org/about/funding.html">Funding</a></li>
    <li><a href="https://travis-ci.org/nipy/nipype"><img src="https://travis-ci.org/nipy/nipype.png?branch=master" alt="travis"></a> · <a href='https://coveralls.io/r/nipy/nipype'><img src='https://coveralls.io/repos/nipy/nipype/badge.png' alt='Coverage Status' /></a></li>
    <li><a href="https://pypi.python.org/pypi/nipype/"><img src="https://img.shields.io/pypi/dm/nipype.svg" alt="Downloads"></a> · <a href='https://pypi.python.org/pypi/nipype/'><img src='https://img.shields.io/pypi/pyversions/nipype.svg' alt='Python Versions' /></a></li>
</ul>


        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="configuration-file">
<span id="config-file"></span><h1>Configuration File<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h1>
<p>Some of the system wide options of Nipype can be configured using a
configuration file. Nipype looks for the file in the local folder under the name
<code class="docutils literal"><span class="pre">nipype.cfg</span></code> and in <code class="docutils literal"><span class="pre">~/.nipype/nipype.cfg</span></code> (in this order). If an option
will not be specified a default value will be assumed. The file is divided into
following sections:</p>
<div class="section" id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><em>workflow_level</em></dt>
<dd>How detailed the logs regarding workflow should be (possible values:
<code class="docutils literal"><span class="pre">INFO</span></code> and <code class="docutils literal"><span class="pre">DEBUG</span></code>; default value: <code class="docutils literal"><span class="pre">INFO</span></code>)</dd>
<dt><em>filemanip_level</em></dt>
<dd>How detailed the logs regarding file operations (for example overwriting
warning) should be (possible values: <code class="docutils literal"><span class="pre">INFO</span></code> and <code class="docutils literal"><span class="pre">DEBUG</span></code>; default value:
<code class="docutils literal"><span class="pre">INFO</span></code>)</dd>
<dt><em>interface_level</em></dt>
<dd>How detailed the logs regarding interface execution should be (possible
values: <code class="docutils literal"><span class="pre">INFO</span></code> and <code class="docutils literal"><span class="pre">DEBUG</span></code>; default value: <code class="docutils literal"><span class="pre">INFO</span></code>)</dd>
<dt><em>log_to_file</em></dt>
<dd>Indicates whether logging should also send the output to a file (possible
values: <code class="docutils literal"><span class="pre">true</span></code> and <code class="docutils literal"><span class="pre">false</span></code>; default value: <code class="docutils literal"><span class="pre">false</span></code>)</dd>
<dt><em>log_directory</em></dt>
<dd>Where to store logs. (string, default value: home directory)</dd>
<dt><em>log_size</em></dt>
<dd>Size of a single log file. (integer, default value: 254000)</dd>
<dt><em>log_rotate</em></dt>
<dd>How many rotation should the log file make. (integer, default value: 4)</dd>
</dl>
</div>
<div class="section" id="execution">
<h2>Execution<a class="headerlink" href="#execution" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><em>plugin</em></dt>
<dd>This defines which execution plugin to use. (possible values: <code class="docutils literal"><span class="pre">Linear</span></code>,
<code class="docutils literal"><span class="pre">MultiProc</span></code>, <code class="docutils literal"><span class="pre">SGE</span></code>, <code class="docutils literal"><span class="pre">IPython</span></code>; default value: <code class="docutils literal"><span class="pre">Linear</span></code>)</dd>
<dt><em>stop_on_first_crash</em></dt>
<dd>Should the workflow stop upon first node crashing or try to execute as many
nodes as possible? (possible values: <code class="docutils literal"><span class="pre">true</span></code> and <code class="docutils literal"><span class="pre">false</span></code>; default value:
<code class="docutils literal"><span class="pre">false</span></code>)</dd>
<dt><em>stop_on_first_rerun</em></dt>
<dd>Should the workflow stop upon first node trying to recompute (by that we
mean rerunning a node that has been run before - this can happen due changed
inputs and/or hash_method since the last run). (possible values: <code class="docutils literal"><span class="pre">true</span></code>
and <code class="docutils literal"><span class="pre">false</span></code>; default value: <code class="docutils literal"><span class="pre">false</span></code>)</dd>
<dt><em>hash_method</em></dt>
<dd>Should the input files be checked for changes using their content (slow, but
100% accurate) or just their size and modification date (fast, but
potentially prone to errors)? (possible values: <code class="docutils literal"><span class="pre">content</span></code> and
<code class="docutils literal"><span class="pre">timestamp</span></code>; default value: <code class="docutils literal"><span class="pre">content</span></code>)</dd>
<dt><em>keep_inputs</em></dt>
<dd>Ensures that all inputs that are created in the nodes working directory are
kept after node execution (possible values: <code class="docutils literal"><span class="pre">true</span></code> and <code class="docutils literal"><span class="pre">false</span></code>; default
value: <code class="docutils literal"><span class="pre">false</span></code>)</dd>
<dt><em>single_thread_matlab</em></dt>
<dd>Should all of the Matlab interfaces (including SPM) use only one thread?
This is useful if you are parallelizing your workflow using MultiProc or
IPython on a single multicore machine. (possible values: <code class="docutils literal"><span class="pre">true</span></code> and
<code class="docutils literal"><span class="pre">false</span></code>; default value: <code class="docutils literal"><span class="pre">true</span></code>)</dd>
<dt><em>display_variable</em></dt>
<dd>What <code class="docutils literal"><span class="pre">DISPLAY</span></code> variable should all command line interfaces be
run with. This is useful if you are using <a class="reference external" href="http://www.x.org/archive/X11R7.5/doc/man/man1/Xnest.1.html">xnest</a>
or <a class="reference external" href="http://www.x.org/archive/X11R6.8.1/doc/Xvfb.1.html">Xvfb</a>
and you would like to redirect all spawned windows to
it. (possible values: any X server address; default value: not
set)</dd>
<dt><em>remove_unnecessary_outputs</em></dt>
<dd>This will remove any interface outputs not needed by the workflow. If the
required outputs from a node changes, rerunning the workflow will rerun the
node. Outputs of leaf nodes (nodes whose outputs are not connected to any
other nodes) will never be deleted independent of this parameter. (possible
values: <code class="docutils literal"><span class="pre">true</span></code> and <code class="docutils literal"><span class="pre">false</span></code>; default value: <code class="docutils literal"><span class="pre">true</span></code>)</dd>
<dt><em>try_hard_link_datasink</em></dt>
<dd>When the DataSink is used to produce an orginized output file outside
of nipypes internal cache structure, a file system hard link will be
attempted first. A hard link allow multiple file paths to point to the
same physical storage location on disk if the condisions allow. By
refering to the same physical file on disk (instead of copying files
byte-by-byte) we can avoid unnecessary data duplication.  If hard links
are not supported for the source or destination paths specified, then
a standard byte-by-byte copy is used.  (possible values: <code class="docutils literal"><span class="pre">true</span></code> and
<code class="docutils literal"><span class="pre">false</span></code>; default value: <code class="docutils literal"><span class="pre">true</span></code>)</dd>
<dt><em>use_relative_paths</em></dt>
<dd>Should the paths stored in results (and used to look for inputs)
be relative or absolute. Relative paths allow moving the whole
working directory around but may cause problems with
symlinks. (possible values: <code class="docutils literal"><span class="pre">true</span></code> and <code class="docutils literal"><span class="pre">false</span></code>; default
value: <code class="docutils literal"><span class="pre">false</span></code>)</dd>
<dt><em>local_hash_check</em></dt>
<dd>Perform the hash check on the job submission machine. This option minimizes
the number of jobs submitted to a cluster engine or a multiprocessing pool
to only those that need to be rerun. (possible values: <code class="docutils literal"><span class="pre">true</span></code> and
<code class="docutils literal"><span class="pre">false</span></code>; default value: <code class="docutils literal"><span class="pre">true</span></code>)</dd>
<dt><em>job_finished_timeout</em></dt>
<dd>When batch jobs are submitted through, SGE/PBS/Condor they could be killed
externally. Nipype checks to see if a results file exists to determine if
the node has completed. This timeout determines for how long this check is
done after a job finish is detected. (float in seconds; default value: 5)</dd>
<dt><em>remove_node_directories (EXPERIMENTAL)</em></dt>
<dd>Removes directories whose outputs have already been used
up. Doesn&#8217;t work with IdentiInterface or any node that patches
data through (without copying) (possible values: <code class="docutils literal"><span class="pre">true</span></code> and
<code class="docutils literal"><span class="pre">false</span></code>; default value: <code class="docutils literal"><span class="pre">false</span></code>)</dd>
<dt><em>stop_on_unknown_version</em></dt>
<dd>If this is set to True, an underlying interface will raise an error, when no
version information is available. Please notify developers or submit a
patch.</dd>
<dt><em>parameterize_dirs</em></dt>
<dd>If this is set to True, the node&#8217;s output directory will contain full
parameterization of any iterable, otherwise parameterizations over 32
characters will be replaced by their hash. (possible values: <code class="docutils literal"><span class="pre">true</span></code> and
<code class="docutils literal"><span class="pre">false</span></code>; default value: <code class="docutils literal"><span class="pre">true</span></code>)</dd>
<dt><em>poll_sleep_duration</em></dt>
<dd>This controls how long the job submission loop will sleep between submitting
all pending jobs and checking for job completion. To be nice to cluster
schedulers the default is set to 60 seconds.</dd>
<dt><em>xvfb_max_wait</em></dt>
<dd>Maximum time (in seconds) to wait for Xvfb to start, if the _redirect_x parameter of an Interface is True.</dd>
</dl>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre>[logging]
workflow_level = DEBUG

[execution]
stop_on_first_crash = true
hash_method = timestamp
display_variable = :1
</pre></div>
</div>
<p>Workflow.config property has a form of a nested dictionary reflecting the
structure of the .cfg file.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">myworkflow</span> <span class="o">=</span> <span class="n">pe</span><span class="o">.</span><span class="n">Workflow</span><span class="p">()</span>
<span class="n">myworkflow</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;execution&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;stop_on_first_rerun&#39;</span><span class="p">:</span> <span class="s">&#39;True&#39;</span><span class="p">,</span>
                                   <span class="s">&#39;hash_method&#39;</span><span class="p">:</span> <span class="s">&#39;timestamp&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>You can also directly set global config options in your workflow script. An
example is shown below. This needs to be called before you import the
pipeline or the logger. Otherwise logging level will not be reset.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">nipype</span> <span class="kn">import</span> <span class="n">config</span>
<span class="n">cfg</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">logging</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">workflow_level</span> <span class="o">=</span> <span class="s">&#39;DEBUG&#39;</span><span class="p">),</span>
           <span class="n">execution</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;stop_on_first_crash&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                      <span class="s">&#39;hash_method&#39;</span><span class="p">:</span> <span class="s">&#39;content&#39;</span><span class="p">})</span>
<span class="n">config</span><span class="o">.</span><span class="n">update_config</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="enabling-logging-to-file">
<h2>Enabling logging to file<a class="headerlink" href="#enabling-logging-to-file" title="Permalink to this headline">¶</a></h2>
<p>By default, logging to file is disabled. One can enable and write the file to
a location of choice as in the example below.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">nipype</span> <span class="kn">import</span> <span class="n">config</span><span class="p">,</span> <span class="n">logging</span>
<span class="n">config</span><span class="o">.</span><span class="n">update_config</span><span class="p">({</span><span class="s">&#39;logging&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;log_directory&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span>
                                  <span class="s">&#39;log_to_file&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}})</span>
<span class="n">logging</span><span class="o">.</span><span class="n">update_logging</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<p>The logging update line is necessary to change the behavior of logging such as
output directory, logging level, etc.,.</p>
</div>
<div class="section" id="debug-configuration">
<h2>Debug configuration<a class="headerlink" href="#debug-configuration" title="Permalink to this headline">¶</a></h2>
<p>To enable debug mode, one can insert the following lines:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">nipype</span> <span class="kn">import</span> <span class="n">config</span><span class="p">,</span> <span class="n">logging</span>
<span class="n">config</span><span class="o">.</span><span class="n">enable_debug_mode</span><span class="p">()</span>
<span class="n">logging</span><span class="o">.</span><span class="n">update_logging</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<p>In this mode the following variables are set:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;execution&#39;</span><span class="p">,</span> <span class="s">&#39;stop_on_first_crash&#39;</span><span class="p">,</span> <span class="s">&#39;true&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;execution&#39;</span><span class="p">,</span> <span class="s">&#39;remove_unnecessary_outputs&#39;</span><span class="p">,</span> <span class="s">&#39;false&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;logging&#39;</span><span class="p">,</span> <span class="s">&#39;workflow_level&#39;</span><span class="p">,</span> <span class="s">&#39;DEBUG&#39;</span><span class="p">)</span>
<span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;logging&#39;</span><span class="p">,</span> <span class="s">&#39;interface_level&#39;</span><span class="p">,</span> <span class="s">&#39;DEBUG&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2009-15, Neuroimaging in Python team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
</div>

  </body>
</html>